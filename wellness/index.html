<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Wellness - Evaluare Holistică NUTRISIB</title>
    <meta name="description" content="Evaluare profil wellness Nutrisib.">
    <meta name="robots" content="noindex, nofollow">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        /* --- CSS CONSTANTINA SIMION (Footer & Colors) + COMPACT FORM --- */
        :root {
            --color-bg: #f3f4f6;
            --color-bg-white: #ffffff;
            --color-text-dark: #1f2937;
            --color-text-medium: #374151;
            --color-brand-dark: #0A2463;
            --color-brand-medium: #3E92CC;
            --color-brand-active: #2563eb;
            --color-border: #e5e7eb;
            
            /* CULORI FOOTER PRELUATE EXACT */
            --color-text-footer: #bdc3c7;
            --color-text-footer-link: #ecf0f1;
            --color-footer-bg: #212529;

            --font-main: 'Inter', sans-serif;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--color-bg);
            color: var(--color-text-dark);
            margin: 0;
            padding: 1rem;
            display: flex;
            justify-content: center;
        }

        .main-container {
            background-color: var(--color-bg-white);
            max-width: 56rem;
            width: 100%;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 95vh;
        }

        header {
            background: linear-gradient(to bottom right, var(--color-brand-dark), var(--color-brand-medium));
            color: #fff;
            padding: 2rem;
            text-align: center;
        }
        header h1 { margin: 0; font-size: 1.8rem; }
        header h2 { font-weight: 300; font-size: 1rem; opacity: 0.9; }

        /* Progress Bar */
        .progress-container { background: #e2e8f0; height: 6px; }
        .progress-bar { background: var(--color-brand-medium); height: 100%; width: 14%; transition: width 0.3s; }

        main { padding: 2rem; flex: 1; }

        /* Tabs */
        .tab { display: none; animation: fadeIn 0.4s; }
        .tab.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Inputs & Layout Compact */
        .field-group { margin-bottom: 1rem; }
        label { display: block; font-weight: 600; margin-bottom: 0.4rem; color: var(--color-text-dark); font-size: 0.9rem; }
        
        input, select, textarea {
            width: 100%; padding: 0.6rem;
            border: 1px solid var(--color-border);
            border-radius: 0.4rem;
            font-family: inherit;
        }

        /* GRID 2 COLOANE PENTRU RADIO/CHECKBOX (Compact) */
        .checkbox-group, .radio-group {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2 coloane */
            gap: 0.5rem 1rem;
            background: #f9fafb;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #f3f4f6;
        }
        
        /* Excepție pentru liste lungi verticale */
        .checkbox-group.vertical, .radio-group.vertical { grid-template-columns: 1fr; }

        .checkbox-group label, .radio-group label {
            font-weight: 400;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0;
            font-size: 0.9rem;
        }
        
        /* Input grids */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; }

        /* Buttons */
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 2rem; border-top: 1px solid #eee; padding-top: 1rem; }
        .nav-buttons.right { justify-content: flex-end; }
        button { padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; border: none; }
        .btn-primary { background: var(--color-brand-dark); color: #fff; }
        .btn-submit { background: #22c55e; color: #fff; }
        .btn-secondary { background: #e2e8f0; color: #374151; }

        /* Footer Style Constantina */
        footer.infographic-footer {
            background-color: var(--color-footer-bg);
            color: var(--color-text-footer);
            text-align: center;
            padding: 2rem;
            font-size: 0.85rem;
            margin-top: auto;
        }
        footer a { color: var(--color-text-footer-link); text-decoration: none; }
        .copyright { font-size: 0.75rem; color: #6c757d; margin-top: 1rem; border-top: 1px solid #343a40; padding-top: 1rem; }

        @media (max-width: 600px) {
            .grid-2, .grid-3, .checkbox-group, .radio-group { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="main-container">
    <header>
        <h1>PROFILUL WELLNESS</h1>
        <h2>Evaluare și Arhitectură Biologică - Nutrisib</h2>
    </header>

    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

    <main>
        <form id="wellnessForm" name="evaluare-wellness" method="POST" data-netlify="true" action="success.html" onsubmit="handleFormSubmit(event)">
            <input type="hidden" name="form-name" value="evaluare-wellness">

            <div class="tab active">
                <h3>Bine ai venit!</h3>
                <p>Această evaluare durează aproximativ 3 minute și ne ajută să construim profilul tău metabolic.</p>
                <div class="nav-buttons right">
                    <button type="button" class="btn-primary" onclick="nextTab()">Start &rarr;</button>
                </div>
            </div>

            <div class="tab">
                <h3>1. Date Personale</h3>
                <div class="grid-2">
                    <div class="field-group"><label>Nume</label><input type="text" id="nume" name="nume" required></div>
                    <div class="field-group"><label>Prenume</label><input type="text" id="prenume" name="prenume" required></div>
                </div>
                <div class="grid-2">
                    <div class="field-group"><label>Email</label><input type="email" id="email" name="email" required></div>
                    <div class="field-group"><label>Telefon</label><input type="tel" name="telefon" required></div>
                </div>
                <div class="grid-3">
                    <div class="field-group"><label>Vârsta</label><input type="number" id="varsta" name="varsta" required></div>
                    <div class="field-group"><label>Înălțime (cm)</label><input type="number" id="inaltime" name="inaltime" required></div>
                    <div class="field-group"><label>Greutate (kg)</label><input type="number" id="greutate" name="greutate" required></div>
                </div>
                <div class="field-group">
                    <label>Sex</label>
                    <select id="sex" name="sex" required>
                        <option value="Feminin">Feminin</option>
                        <option value="Masculin">Masculin</option>
                    </select>
                </div>
                 <div class="field-group">
                    <label>Nivel Activitate</label>
                    <select id="activitate" name="activitate">
                        <option value="1.2">Sedentar (Birou)</option>
                        <option value="1.375">Ușor Activ (1-3 zile/săpt)</option>
                        <option value="1.55">Moderat (3-5 zile/săpt)</option>
                        <option value="1.725">Foarte Activ (Zilnic)</option>
                    </select>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="btn-secondary" onclick="prevTab()">&larr; Înapoi</button>
                    <button type="button" class="btn-primary" onclick="nextTab()">Următorul &rarr;</button>
                </div>
            </div>

            <div class="tab">
                <h3>2. Stil de viață</h3>
                <div class="field-group">
                    <label>Obiective Principale (bifează):</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="obiective[]" value="Slabire"> Slăbire</label>
                        <label><input type="checkbox" name="obiective[]" value="Energie"> Energie</label>
                        <label><input type="checkbox" name="obiective[]" value="Masa Musculara"> Masă Musculară</label>
                        <label><input type="checkbox" name="obiective[]" value="Sanatate"> Sănătate Generală</label>
                        <label><input type="checkbox" name="obiective[]" value="Digestie"> Digestie</label>
                        <label><input type="checkbox" name="obiective[]" value="Imunitate"> Imunitate</label>
                    </div>
                </div>
                <div class="field-group">
                    <label>Provocări Actuale:</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="provocari[]" value="Dulciuri"> Poftă de dulce</label>
                        <label><input type="checkbox" name="provocari[]" value="Timp"> Lipsă de timp</label>
                        <label><input type="checkbox" name="provocari[]" value="Oboseala"> Oboseală cronică</label>
                        <label><input type="checkbox" name="provocari[]" value="Stres"> Stres ridicat</label>
                    </div>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="btn-secondary" onclick="prevTab()">&larr; Înapoi</button>
                    <button type="button" class="btn-primary" onclick="nextTab()">Următorul &rarr;</button>
                </div>
            </div>

            <div class="tab">
                <h3>3. Finalizare</h3>
                <p>Prin apăsarea butonului "Trimite", vei primi automat raportul PDF pe dispozitivul tău, iar datele vor fi trimise către specialistul Nutrisib.</p>
                
                <input type="hidden" id="imc" name="imc">
                <input type="hidden" id="rmb" name="rmb">
                
                <div class="nav-buttons">
                    <button type="button" class="btn-secondary" onclick="prevTab()">&larr; Înapoi</button>
                    <button type="submit" class="btn-primary btn-submit">Trimite și Descarcă PDF</button>
                </div>
            </div>
        </form>
    </main>

    <div id="pdf-report" style="display:none; padding: 20px; font-family: Helvetica;">
        <h2 style="color:#0A2463; border-bottom: 2px solid #3E92CC;">Raport Evaluare Wellness</h2>
        <p><strong>Nume:</strong> <span id="pdf_nume"></span></p>
        <p><strong>Data:</strong> <script>document.write(new Date().toLocaleDateString())</script></p>
        <hr>
        <h3>Parametri Metabolici Estimați</h3>
        <p><strong>IMC:</strong> <span id="pdf_imc"></span></p>
        <p><strong>Metabolism Bazal:</strong> <span id="pdf_rmb"></span> kcal</p>
        <p style="margin-top:30px; font-size:12px; color:grey;">Generat de Nutrisib.club</p>
    </div>

    <footer class="infographic-footer">
        <p>Nutrisib - Partenerul tău în echilibru și sănătate</p>
        <div class="copyright">dr.ing. Radu Pascu - 2025</div>
    </footer>
</div>

<script>
    let currentTab = 0;
    const tabs = document.querySelectorAll('.tab');
    const progressBar = document.getElementById('progressBar');

    function showTab(n) {
        tabs.forEach(t => t.classList.remove('active'));
        tabs[n].classList.add('active');
        progressBar.style.width = ((n + 1) / tabs.length * 100) + '%';
    }

    function nextTab() {
        if (!tabs[currentTab].querySelector(':invalid')) {
            currentTab++;
            if(currentTab === 1) calculate(); // Calculează după date personale
            showTab(currentTab);
        } else {
            tabs[currentTab].querySelector(':invalid').reportValidity();
        }
    }

    function prevTab() {
        currentTab--;
        showTab(currentTab);
    }

    function calculate() {
        const h = document.getElementById('inaltime').value / 100;
        const w = document.getElementById('greutate').value;
        const age = document.getElementById('varsta').value;
        const sex = document.getElementById('sex').value;
        
        if(h && w) {
            const imc = (w / (h * h)).toFixed(1);
            document.getElementById('imc').value = imc;
            document.getElementById('pdf_imc').textContent = imc;
            
            // Mifflin-St Jeor
            let rmb = (10 * w) + (6.25 * h * 100) - (5 * age);
            rmb += (sex === 'Masculin') ? 5 : -161;
            document.getElementById('rmb').value = rmb.toFixed(0);
            document.getElementById('pdf_rmb').textContent = rmb.toFixed(0);
        }
    }

    function handleFormSubmit(e) {
        // Nu prevenim default-ul complet pentru a lăsa Netlify să preia datele,
        // dar vrem să generăm PDF-ul înainte de redirect.
        // Strategia: lăsăm formularul să se trimită (POST), iar PDF-ul se descarcă rapid.
        
        calculate();
        document.getElementById('pdf_nume').textContent = document.getElementById('nume').value + ' ' + document.getElementById('prenume').value;

        const element = document.getElementById('pdf-report');
        element.style.display = 'block';
        
        const opt = {
            margin: 10,
            filename: 'Raport_Nutrisib.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        // Generăm PDF-ul și îl salvăm.
        // Netlify va face redirect către success.html automat după POST.
        html2pdf().set(opt).from(element).save();
    }
</script>

</body>
</html>